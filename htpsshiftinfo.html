<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>HTPS Exact Shift Finder</title>
    <style>
        body { font-family: sans-serif; background-color: #eef2f3; display: flex; justify-content: center; padding: 20px; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 450px; text-align: center; }
        h2 { color: #2c3e50; }
        input { width: 80%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; }
        button { background: #2980b9; color: white; border: none; padding: 12px 20px; border-radius: 5px; cursor: pointer; width: 86%; font-size: 16px; }
        #output { margin-top: 25px; padding: 20px; border-radius: 10px; display: none; line-height: 1.6; }
        .duty { font-size: 22px; font-weight: bold; color: #27ae60; display: block; }
        .rest { color: #7f8c8d; font-size: 20px; }
    </style>
</head>
<body>

<div class="card">
    <h2>HTPS Shift Finder</h2>
    <p>Date aur Time select karein:</p>
    <input type="date" id="targetDate" value="2026-01-01">
    <input type="time" id="targetTime" value="08:00">
    <br>
    <button onclick="findExactShift()">Pata Karein</button>

    <div id="output"></div>
</div>

<script>
    function findExactShift() {
        const dVal = document.getElementById('targetDate').value;
        const tVal = document.getElementById('targetTime').value;
        if(!dVal || !tVal) return alert("Date/Time bharein");

        let [h, m] = tVal.split(':').map(Number);
        let dateObj = new Date(dVal);

        // Shift Category Selection
        let shiftCategory = "";
        if (h >= 6 && h < 14) shiftCategory = "M";
        else if (h >= 14 && h < 22) shiftCategory = "E";
        else {
            shiftCategory = "N";
            if (h < 6) dateObj.setDate(dateObj.getDate() - 1); // 22:00 se 06:00 tak ek hi din ki shift
        }

        // 12-Day Cycle Logic (Based on 1st Jan 2026)
        const ref = new Date('2026-01-01');
        const diff = Math.floor((dateObj - ref) / (1000 * 60 * 60 * 24));
        let dayIndex = ((diff % 12) + 12) % 12;

        // Shift Patterns from PDF 
        const data = {
            "A": ["E1","E2","E3","R","M1","M2","M3","N1","N2","N3","R","R"],
            "B": ["N2","N3","R","E1","E2","E3","R","M1","M2","M3","R","N1"],
            "C": ["R","M1","M2","M3","R","N1","N2","N3","R","E1","E2","E3"],
            "D": ["M3","R","N1","N2","N3","R","E1","E2","E3","R","M1","M2"]
        };

        // Mapping for labels
        const labels = {
            "E1": "First Evening", "E2": "Second Evening", "E3": "Third Evening",
            "M1": "First Morning", "M2": "Second Morning", "M3": "Third Morning",
            "N1": "First Night", "N2": "Second Night", "N3": "Third Night",
            "R": "Rest Day"
        };

        let activeGroup = "None";
        let exactShiftName = "";

        for (let grp in data) {
            let shiftCode = data[grp][dayIndex];
            if (shiftCode.startsWith(shiftCategory)) {
                activeGroup = "Group " + grp;
                exactShiftName = labels[shiftCode];
                break;
            }
        }

        const out = document.getElementById('output');
        out.style.display = "block";
        out.style.backgroundColor = "#f9f9f9";
        
        if(activeGroup !== "None") {
            out.innerHTML = `Time Slot: <b>${shiftCategory === 'M' ? 'Morning (06-14)' : shiftCategory === 'E' ? 'Evening (14-22)' : 'Night (22-06)'}</b><br>` +
                            `Current Duty: <span class="duty">${activeGroup}</span>` +
                            `Shift Detail: <b>${exactShiftName}</b>`;
        } else {
            out.innerHTML = `<span class="rest">Is samay sabhi groups ka Changeover ya Rest chal raha hai.</span>`;
        }
    }
</script>

</body>
</html>
